<div class="main-wrapper">
  <mat-checkbox *ngIf="modifyMultiple" class="checkbox" [(ngModel)]="file.isSelected" (change)="checkboxClicked.next()"></mat-checkbox>
  <div class="wrapper" [ngClass]="{'odd-wrapper': isOdd}">
    <!-- Media is a video -->
    <img [src]="imgSource" class="thumbnail" (click)="openMediaClick()" />

    <!--
  <div *ngIf="!file.mimetype.indexOf('video')"> -->
    <!-- Media is a photo -->
    <!-- <img *ngIf="!file.thumbnail" src="https://i.kym-cdn.com/photos/images/newsfeed/001/460/439/32f.jpg" class="thumbnail" />
    <img *ngIf="file.thumbnail" [src]="getThumbnailUrl(file.thumbnail)" class="thumbnail" />
  </div> -->


    <div class="content-wrapper">
      <div class="name-tag-container">
        <div class="file-container">
          {{file.name}}
        </div>

        <!-- Tags -->
        <mat-chip-list>
          <mat-chip *ngIf="file.mimetype.includes('video')" class="chip-video my-chip ellipse-text">Video</mat-chip>
          <mat-chip *ngIf="file.mimetype.includes('image')" class="chip-image my-chip ellipse-text">Image</mat-chip>
          <mat-chip *ngFor="let tag of file.tags" [style.background-color]="tag.backgroundColor"
            style="max-width: 200px;" class="ellipse-text my-chip" [style.color]="tag.textColor" [matTooltip]="tag.name"
            matTooltipClass="organizer-tooltip" (click)="viewMediaWithTag(tag)">
            {{ tag.name }}
          </mat-chip>
        </mat-chip-list>
      </div>
      <div class="button-container">
        <span class="button-image-wrapper"
          matTooltip="Date Added: {{file.dateAdded | date:'medium'}}" matTooltipClass="organizer-tooltip">
          <i class="fas fa-calendar-plus"></i>
          <div class="info-text">
            {{file.dateAdded | date}}
          </div>
        </span>
        <span class="button-image-wrapper"
          matTooltip="Total Views: {{file.views}}" matTooltipClass="organizer-tooltip">
          <i class="far fa-eye"></i>
          <div class="info-text">
            {{file.views}}
          </div>
        </span>
        <button mat-icon-button (click)="favoriteToggle()">
          <i *ngIf="!file.isFavorite" class="far fa-star"></i>
          <i *ngIf="file.isFavorite" class="fas fa-star"></i>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
          <mat-icon>more_vert</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>

<mat-menu #menu="matMenu">
  <button mat-menu-item (click)="showMediaInfo()">
    <div class="menu-button-wrapper">
      <i class="fas fa-info menu-button-icon"></i>
      <div>Information</div>
    </div>
  </button>
  <button mat-menu-item (click)="openInDeoVR()">
    <div class="menu-button-wrapper">
      <i class="fas fa-vr-cardboard menu-button-icon"></i>
      <span>Open in DeoVR</span>
    </div>
  </button>
  <button mat-menu-item (click)="showTags()">
    <div class="menu-button-wrapper">
      <i class="fas fa-tags menu-button-icon"></i>
      <span>Modify Tags</span>
    </div>
  </button>
  <button mat-menu-item (click)="ignoreMedia()">
    <div class="menu-button-wrapper">
      <i class="fas fa-trash-alt menu-button-icon"></i>
      <span>Hide Media</span>
    </div>
  </button>
</mat-menu>
